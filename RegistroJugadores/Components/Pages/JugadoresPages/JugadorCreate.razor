@page "/Jugador/Crear"
@inject JugadoresService jugadoresService
@inject NavigationManager navigationManager
@rendermode InteractiveServer

@*HTML*@
<PageTitle> Crear Jugador</PageTitle>
<EditForm Model="jugador" OnValidSubmit="Guardar">
	<DataAnnotationValidator/>
	<div class="container">
		<div class="card shadow-lg">
			<div class="card-header text-center">
				<h5>Crear Jugador</h5>
			</div>

			<div class="card-body">
				@*JugadorId*@
				<div class="mb-3">
					<label class="form-label"><strong>JugadorId</strong></label>
					<InputNumber class="form-control" @bind-Value="jugador.JugadorId" readonly></InputNumber>
				</div>
				@*Nombres*@
				<div class="mb-3">
					<label class="form-label"><strong>Nombres</strong></label>
					<InputText class="form-control" @bind-Value="jugador.Nombres"></InputText>
					<ValidationMessage For="@(() => jugador.Nombres)" />
				</div>
				@*Partidas*@
				<div class="mb-3">
					<label class="form-label"><strong>Partidas</strong></label>
					<InputNumber class="form-control" @bind-Value="jugador.Partidas"></InputNumber>
					<ValidationMessage For="@(() => jugador.Partidas)" />
				</div>
			</div>

			@*Footer*@
			<div class="card-footer text-center mt-2">
				<a href="/Jugador/Index" class="btn btn-secondary"><span class"bi bi-arro-left></span>Volver</a>
				<button type="submit" class="btn btn-primary bi bi-floppy">Guardar</button>
			</div>
		</div>
	</div>
</EditForm>
@code {
	public Jugadores jugador { get; set; } = new Jugadores();
	public string Mensaje { get; set; } = string.Empty;
	public List<Jugadores> ListaJugadores { get; set; } = new List<Jugadores>();

	protected override async Task OnInitializedAsync()
	{
		ListaJugadores = await jugadoresService.Listar(d => d.JugadorId > 0);
	}

	public async void Guardar()
	{
		var creado = await jugadoresService.Guardar(jugador);

		if(creado)
		{
			//toastService.ShowSuccess("Jugador Creado Exitosamente");
			navigationManager.NavigateTo("/Jugador/Index");
		}
		else
		{
			//toastService.ShowError("No se pudo guardar correctamente");
			Mensaje = "No se pudo guardar correctamente";
		}
	}
}
